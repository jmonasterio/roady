{"id":"roady-1eo","title":"Migration: existing tenants to bands","description":"Script to convert existing tenant data to band structure. Rename tenants to bands. Add band names.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T17:59:00.8885706-08:00","updated_at":"2025-12-07T17:59:00.8885706-08:00"}
{"id":"roady-1xt","title":"Update user and band tenant documents","description":"Add name, ownerId, and roles fields to existing tenant documents. No user document changes needed. Leverage existing tenancy model.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T17:58:47.972311-08:00","updated_at":"2025-12-07T18:11:54.0300053-08:00","dependencies":[{"issue_id":"roady-1xt","depends_on_id":"roady-amg","type":"blocks","created_at":"2025-12-07T17:59:08.8651868-08:00","created_by":"daemon"}]}
{"id":"roady-2v0","title":"App layer: band initialization and switching","description":"On init: call /my-tenants to get user's bands. If first time, call /api/tenants/create. Set DB.setTenant() for current band. Load data.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T17:58:54.8236038-08:00","updated_at":"2025-12-07T18:12:53.0422079-08:00"}
{"id":"roady-61v","title":"Handle API failures gracefully in offline/unconnected mode","description":"When backend API (localhost:5985) is unavailable: allow tenant switching, band creation, and all local operations without blocking. JWT issues and choose-tenant failures should not break the app.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-08T20:10:07.93589-08:00","updated_at":"2025-12-08T20:10:07.93589-08:00","dependencies":[{"issue_id":"roady-61v","depends_on_id":"roady-g56","type":"blocks","created_at":"2025-12-08T21:19:31.1182957-08:00","created_by":"daemon"}]}
{"id":"roady-7da","title":"API: Soft delete logic and cascading","description":"Implement soft delete for bands with cascade to equipment, gig types, gigs. Mark documents with deletedAt and deletedBy. Exclude deleted docs in queries.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T18:04:21.0415868-08:00","updated_at":"2025-12-07T18:04:47.88482-08:00","closed_at":"2025-12-07T18:04:47.88482-08:00"}
{"id":"roady-894","title":"API: POST /api/tenants endpoints for CRUD","description":"Implement /api/tenants/create, /list, /:bandId/rename, /:bandId/members, /:bandId/invite, /:bandId/delete. All soft deletes with deletedAt marker. Owner-only authorization.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T18:04:19.6506876-08:00","updated_at":"2025-12-07T18:04:46.8606377-08:00","closed_at":"2025-12-07T18:04:46.8606377-08:00","dependencies":[{"issue_id":"roady-894","depends_on_id":"roady-e76","type":"blocks","created_at":"2025-12-07T18:04:25.104623-08:00","created_by":"daemon"},{"issue_id":"roady-894","depends_on_id":"roady-7da","type":"blocks","created_at":"2025-12-07T18:04:26.2925479-08:00","created_by":"daemon"}]}
{"id":"roady-93s","title":"Create new band dialog","description":"Modal dialog to create new band. New band = new shared tenant. User becomes owner. Can invite members.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:58:51.1686058-08:00","updated_at":"2025-12-07T18:21:06.3023163-08:00","closed_at":"2025-12-07T18:21:06.3023163-08:00"}
{"id":"roady-93t","title":"Band-first approach: Data model and user mental model","description":"Users think in terms of bands, not tenants. Every band = one shared tenant. Original tenant becomes first band. Users can create more bands with separate tenants.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:58:41.6575773-08:00","updated_at":"2025-12-07T17:58:41.6575773-08:00","dependencies":[{"issue_id":"roady-93t","depends_on_id":"roady-1xt","type":"blocks","created_at":"2025-12-07T17:59:06.1533264-08:00","created_by":"daemon"},{"issue_id":"roady-93t","depends_on_id":"roady-xyf","type":"blocks","created_at":"2025-12-07T17:59:07.3027277-08:00","created_by":"daemon"},{"issue_id":"roady-93t","depends_on_id":"roady-894","type":"blocks","created_at":"2025-12-07T18:04:24.3941274-08:00","created_by":"daemon"}]}
{"id":"roady-amg","title":"Database layer: band management methods","description":"Add setCurrentBand(), getAllUserBands(), createBand(), updateBandName(), addBandMember() to DB layer.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:58:53.6343599-08:00","updated_at":"2025-12-07T18:11:56.8621119-08:00","closed_at":"2025-12-07T18:11:56.8621119-08:00"}
{"id":"roady-axw","title":"Settings page: band management","description":"Display current band, option to rename, show all user's bands, member list, delete band (if solo).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:58:52.5980096-08:00","updated_at":"2025-12-07T18:23:09.1335897-08:00","closed_at":"2025-12-07T18:23:09.1335897-08:00"}
{"id":"roady-duy","title":"Verify mycouch /api/tenants endpoints and soft delete behavior","description":"Confirm /api/tenants endpoints work as expected. Verify soft delete enforcement, cascade behavior, and authorization checks are handled by mycouch backend.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T18:04:51.5017669-08:00","updated_at":"2025-12-07T18:05:01.9837905-08:00","closed_at":"2025-12-07T18:05:01.9837905-08:00"}
{"id":"roady-e76","title":"Data model: Add soft delete fields","description":"Add deletedAt and deletedBy to band tenant and content documents. Support deleted marker in equipment, gig types, gigs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T18:04:22.128624-08:00","updated_at":"2025-12-07T18:08:37.2242051-08:00","closed_at":"2025-12-07T18:08:37.2242051-08:00"}
{"id":"roady-g56","title":"Fix: Clerk JWT token not updating when setting user metadata","description":"PROGRESS: Clerk JWT active_tenant_id claim implementation. COMPLETED FIXES: 1) /choose-tenant endpoint now parses JSON body correctly (added Body import + Body(...) parameter). 2) /api/tenants create endpoint fixed: added Body(...), returns tenantId field. 3) ClerkService now live-loads secret keys from APPLICATIONS dict on-demand, supporting dynamic updates. 4) Application document loading fixed: skips deletedAt records, supports both clerkIssuerId/issuer and databaseName/databaseNames field variants. 5) create_workspace_tenant() now properly adds newly created tenant to user's tenantIds list. CURRENT STATUS: Backend successfully updates user metadata in Clerk (logs confirm 'Updated active tenant in user metadata'). Issue now is: newly created tenants need tenantIds added so /choose-tenant can validate access. Last fix: corrected user lookup in create_workspace_tenant() to hash full sub instead of truncated string. NEXT: Restart MyCouch, test band creation flow end-to-end. Expected: 1) Create band -\u003e POST /api/tenants succeeds. 2) POST /choose-tenant validates user has access. 3) Backend updates Clerk user.public_metadata.active_tenant_id. 4) Client calls session.reload() then getToken(). 5) JWT includes active_tenant_id claim. 6) App initializes successfully. BLOCKING ISSUES: 1) /api/tenants/* endpoints returning 403 because caught by generic /{path:path} proxy route before tenant router (routing order issue). 2) Client still not seeing active_tenant_id in JWT even though backend claims to set it - may be Clerk cache/propagation or token not being refreshed properly.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-08T21:19:27.8734187-08:00","updated_at":"2025-12-08T22:11:13.567912-08:00"}
{"id":"roady-xyf","title":"First-time user: auto-create initial band","description":"When new user signs up, automatically create first band (shared tenant) with default name 'My First Band'. No tenant selection dialog.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T17:58:49.0317411-08:00","updated_at":"2025-12-07T17:58:49.0317411-08:00","dependencies":[{"issue_id":"roady-xyf","depends_on_id":"roady-2v0","type":"blocks","created_at":"2025-12-07T17:59:10.8003779-08:00","created_by":"daemon"}]}
{"id":"roady-yar","title":"Band selector UI component","description":"Add band switcher to main navigation. Show current band name with dropdown to see all user's bands and create new band.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:58:50.1908001-08:00","updated_at":"2025-12-07T18:21:00.8297168-08:00","closed_at":"2025-12-07T18:21:00.8297168-08:00"}
